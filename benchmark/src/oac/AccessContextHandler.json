{
  "name": "AccessContextHandler",
  "gas": 5000000,
  "abi": [
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "initialOwner",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "didRegistry",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "ERC1167FailedCreateClone",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_id",
          "type": "bytes32"
        },
        {
          "internalType": "bytes20",
          "name": "_salt",
          "type": "bytes20"
        },
        {
          "internalType": "bytes32",
          "name": "_did",
          "type": "bytes32"
        }
      ],
      "name": "createContextInstance",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_id",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_did",
          "type": "bytes32"
        }
      ],
      "name": "deleteContextInstance",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_id",
          "type": "bytes32"
        }
      ],
      "name": "getContextInstance",
      "outputs": [
        {
          "internalType": "contract IContextInstance",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_roleContext",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_role",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_did",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32[]",
          "name": "_policyContexts",
          "type": "bytes32[]"
        },
        {
          "internalType": "bytes32[]",
          "name": "_policies",
          "type": "bytes32[]"
        },
        {
          "internalType": "bytes[]",
          "name": "_args",
          "type": "bytes[]"
        }
      ],
      "name": "grantRole",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sessionRegistry",
          "type": "address"
        }
      ],
      "name": "setSessionRegistry",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_did",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_tokenId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_token",
          "type": "bytes32"
        }
      ],
      "name": "startSession",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_roleContext",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_role",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_did",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32[]",
          "name": "_policyContexts",
          "type": "bytes32[]"
        },
        {
          "internalType": "bytes32[]",
          "name": "_policies",
          "type": "bytes32[]"
        },
        {
          "internalType": "bytes[]",
          "name": "_args",
          "type": "bytes[]"
        },
        {
          "internalType": "bytes32",
          "name": "_tokenId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "_token",
          "type": "bytes32"
        }
      ],
      "name": "startSession",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b5060405161249138038061249183398101604081905261002f916100d8565b600080546001600160a01b03199081168255600180549091166001600160a01b0384161790556040516100c49184918490610069906100cb565b92835260208301919091526001600160a01b03166040820152606001604051809103906000f0801580156100a1573d6000803e3d6000fd5b50600280546001600160a01b0319166001600160a01b0392909216919091179055565b5050610115565b6118be80610bd383390190565b600080604083850312156100eb57600080fd5b825160208401519092506001600160a01b038116811461010a57600080fd5b809150509250929050565b610aaf806101246000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c806376ed4a6c1161005b57806376ed4a6c146100e35780638798cc59146100f6578063a71a77d214610109578063e657c9e91461013857600080fd5b80634fd9d24b14610082578063648fce79146100bd578063656c4309146100d0575b600080fd5b6100bb61009036600461058f565b6000805473ffffffffffffffffffffffffffffffffffffffff19166001600160a01b03831617905550565b005b6100bb6100cb3660046105b8565b61014b565b6100bb6100de3660046105e4565b61015b565b6100bb6100f13660046107e8565b6101f2565b6100bb6101043660046108a1565b610215565b61011c610117366004610945565b610223565b6040516001600160a01b03909116815260200160405180910390f35b6100bb61014636600461095e565b610242565b6101568282856102b6565b505050565b82816101678282610331565b6101a65760405162461bcd60e51b815260206004820152600b60248201526a1b9bdd08185b1b1bddd95960aa1b60448201526064015b60405180910390fd5b60006101b38585886103e8565b6000878152600360205260409020805473ffffffffffffffffffffffffffffffffffffffff19166001600160a01b03831617905590505b505050505050565b61020088888888888861049c565b61020b8282886102b6565b5050505050505050565b6101ea86868686868661049c565b6000818152600360205260408120546001600160a01b03165b92915050565b818161024e8282610331565b6102885760405162461bcd60e51b815260206004820152600b60248201526a1b9bdd08185b1b1bddd95960aa1b604482015260640161019d565b5050506000908152600360205260409020805473ffffffffffffffffffffffffffffffffffffffff19169055565b6000546001600160a01b031660405163648fce7960e01b81526004810185905260248101849052604481018390526001600160a01b03919091169063648fce7990606401600060405180830381600087803b15801561031457600080fd5b505af1158015610328573d6000803e3d6000fd5b50505050505050565b6000828152600360205260408120546001600160a01b03166001600160a01b031663fd9965e683336040517fffffffff0000000000000000000000000000000000000000000000000000000060e085901b16815260048101929092526001600160a01b031660248201526044016020604051808303816000875af11580156103bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103e19190610980565b9392505050565b60008061047a858585306104046001546001600160a01b031690565b60408051602080820196909652808201949094526bffffffffffffffffffffffff19606093841b8116848601529190921b811660748401528151808403606801815260888401835280519085012060a88401529390931660c8820152825180820360bc01815260dc909101909252815191012090565b600254909150610493906001600160a01b031682610521565b95945050505050565b6000868152600360205260409020546001600160a01b03166001600160a01b03166338f03dbf86868686866040518663ffffffff1660e01b81526004016104e79594939291906109dd565b600060405180830381600087803b15801561050157600080fd5b505af1158015610515573d6000803e3d6000fd5b50505050505050505050565b6000763d602d80600a3d3981f3363d3d373d3d3d363d730000008360601b60e81c176000526e5af43d82803e903d91602b57fd5bf38360781b1760205281603760096000f590506001600160a01b03811661023c576040516330be1a3d60e21b815260040160405180910390fd5b6000602082840312156105a157600080fd5b81356001600160a01b03811681146103e157600080fd5b6000806000606084860312156105cd57600080fd5b505081359360208301359350604090920135919050565b6000806000606084860312156105f957600080fd5b8335925060208401356bffffffffffffffffffffffff198116811461061d57600080fd5b929592945050506040919091013590565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff8111828210171561066d5761066d61062e565b604052919050565b600067ffffffffffffffff82111561068f5761068f61062e565b5060051b60200190565b600082601f8301126106aa57600080fd5b813560206106bf6106ba83610675565b610644565b82815260059290921b840181019181810190868411156106de57600080fd5b8286015b848110156106f957803583529183019183016106e2565b509695505050505050565b6000601f838184011261071657600080fd5b823560206107266106ba83610675565b82815260059290921b8501810191818101908784111561074557600080fd5b8287015b848110156107dc57803567ffffffffffffffff8082111561076a5760008081fd5b818a0191508a603f83011261077f5760008081fd5b858201356040828211156107955761079561062e565b6107a6828b01601f19168901610644565b92508183528c818386010111156107bd5760008081fd5b8181850189850137506000908201870152845250918301918301610749565b50979650505050505050565b600080600080600080600080610100898b03121561080557600080fd5b883597506020890135965060408901359550606089013567ffffffffffffffff8082111561083257600080fd5b61083e8c838d01610699565b965060808b013591508082111561085457600080fd5b6108608c838d01610699565b955060a08b013591508082111561087657600080fd5b506108838b828c01610704565b93505060c0890135915060e089013590509295985092959890939650565b60008060008060008060c087890312156108ba57600080fd5b863595506020870135945060408701359350606087013567ffffffffffffffff808211156108e757600080fd5b6108f38a838b01610699565b9450608089013591508082111561090957600080fd5b6109158a838b01610699565b935060a089013591508082111561092b57600080fd5b5061093889828a01610704565b9150509295509295509295565b60006020828403121561095757600080fd5b5035919050565b6000806040838503121561097157600080fd5b50508035926020909101359150565b60006020828403121561099257600080fd5b815180151581146103e157600080fd5b600081518084526020808501945080840160005b838110156109d2578151875295820195908201906001016109b6565b509495945050505050565b85815260006020868184015260a060408401526109fd60a08401876109a2565b8381036060850152610a0f81876109a2565b905083810360808501528085518083528383019150838160051b8401018488016000805b84811015610a8f57601f198088860301875283518051808752845b81811015610a69578281018c01518882018d01528b01610a4e565b508681018b01859052978a0197601f019091169094018801935091870191600101610a33565b50919d9c5050505050505050505050505056fea164736f6c6343000814000a608060405234801561001057600080fd5b50604051620018be380380620018be833981016040819052610031916100f0565b600080546001600160a01b0319166001600160a01b038316178155829033908290829081908890879082900361008157604051630502908360e41b81526000600482015260240160405180910390fd5b61008a826100b7565b5050600480546001600160a01b0319166001600160a01b0383161790555050600555506101369350505050565b6001805490829055604051829082907fcbbb77f62b929125ef27b63e21aa7682e6a2cb1f238a0c221931211b4d1913eb90600090a35050565b60008060006060848603121561010557600080fd5b83516020850151604086015191945092506001600160a01b038116811461012b57600080fd5b809150509250925092565b61177880620001466000396000f3fe608060405234801561001057600080fd5b506004361061011b5760003560e01c80638da5cb5b116100b2578063ac2b831b11610081578063d70da68e11610066578063d70da68e1461024d578063d7392ce614610260578063fd9965e61461027357600080fd5b8063ac2b831b14610227578063b8bc0fd81461023a57600080fd5b80638da5cb5b146101dd57806394c4f3a3146101ee5780639ac47f5b146102015780639e8e764e1461021457600080fd5b80636c541a3d116100ee5780636c541a3d146101915780636d8c9532146101a45780637a8fbbce146101b75780637bf67eef146101ca57600080fd5b8063219adc2e146101205780632654083f1461013557806332adfd2b1461015e57806338f03dbf1461017e575b600080fd5b61013361012e366004610ea4565b610296565b005b610148610143366004610ebd565b6102ae565b6040516101559190610edf565b60405180910390f35b61017161016c366004610fff565b6102ec565b6040516101559190611063565b61013361018c3660046110ee565b6102f8565b61013361019f3660046112c1565b6104fa565b6101336101b2366004610ebd565b61050a565b6101336101c5366004611311565b61051d565b6101336101d8366004610ebd565b61055a565b600154604051908152602001610155565b6101336101fc36600461136e565b6105b8565b61013361020f3660046113c0565b6105e7565b610133610222366004611408565b610605565b610133610235366004611474565b61064d565b610133610248366004611311565b6106b4565b61013361025b366004611311565b6106d2565b61013361026e3660046114eb565b61070f565b610286610281366004611580565b610783565b6040519015158152602001610155565b806102a081610798565b6102aa60006107a5565b5050565b6040805160a0810182526000808252602082018190529181018290526060810182905260808101919091526102e383836107de565b90505b92915050565b60606102e3838361090c565b600061030360055490565b835160008281526002602090815260408083208b84529091529020549192509081146103765760405162461bcd60e51b815260206004820152601660248201527f706f6c696379206c656e206e6f7420616c6c6f7765640000000000000000000060448201526064015b60405180910390fd5b60005b818110156104c55760006103bf878381518110610398576103986115b0565b60200260200101518784815181106103b2576103b26115b0565b60200260200101516107de565b805160208083015160008881526002835260408082208f83528452808220948252600190940183528381209181529152205490915060ff166104435760405162461bcd60e51b815260206004820152601b60248201527f706f6c69637920666f7220726f6c65206e6f7420616c6c6f7765640000000000604482015260640161036d565b61046681868481518110610459576104596115b0565b60200260200101516109f8565b6104b25760405162461bcd60e51b815260206004820152601460248201527f706f6c696379206e6f7420736174697366696564000000000000000000000000604482015260640161036d565b50806104bd816115dc565b915050610379565b506104f1878760009182526007602090815260408084209284529190529020805460ff19166001179055565b50505050505050565b610505838383610ae6565b505050565b8161051481610798565b610505826107a5565b8061052781610798565b6000848152600260208181526040808420878552825280842089855290920190529020805460ff191690555b5050505050565b60008281526007602090815260408083208484529091529020548290829060ff168061058a575061058a81610af3565b61059357600080fd5b505060009182526007602090815260408084209284529190529020805460ff19169055565b806105c281610798565b60006105cd60055490565b90506105db81888888610aff565b6104f18185838a610c51565b806105f181610798565b6105536105fd60055490565b868686610aff565b8061060f81610798565b61061a878787610ae6565b600084815260026020818152604080842087855282528084208b855290920190529020805460ff191660011790556104f1565b8061065781610798565b600061066260055490565b9050610670818a8a8a610c51565b61067b868686610ae6565b60008181526002602081815260408084208d855282528084208a855290920190529020805460ff19166001179055505050505050505050565b806106be81610798565b6105536106ca60055490565b848787610c51565b806106dc81610798565b6000848152600260208181526040808420878552825280842089855290920190529020805460ff19166001179055610553565b8061071981610798565b600061072460055490565b9050610732818a8787610aff565b61073e818b838c610c51565b610749888888610ae6565b60008181526002602081815260408084208e855282528084208c855290920190529020805460ff1916600117905550505050505050505050565b600061078f8383610caa565b50600192915050565b6107a28133610caa565b50565b6001805490829055604051829082907fcbbb77f62b929125ef27b63e21aa7682e6a2cb1f238a0c221931211b4d1913eb90600090a35050565b6040805160a081018252600080825260208201819052918101829052606081018290526080810191909152600554830361088a57506000828152600660209081526040808320848452825291829020825160a08101845281548152600182015492810192909252600201546001600160a01b03811692820192909252600160a01b820460e01b6001600160e01b0319166060820152600160c01b90910460ff16151560808201526102e6565b61089383610ce3565b604051632654083f60e01b815260048101859052602481018490526001600160a01b039190911690632654083f9060440160a060405180830381865afa1580156108e1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610905919061160a565b90506102e6565b81516060908067ffffffffffffffff81111561092a5761092a610f29565b60405190808252806020026020018201604052801561098357816020015b6040805160a0810182526000808252602080830182905292820181905260608201819052608082015282526000199092019101816109485790505b50915060005b818110156109f0576109c08582815181106109a6576109a66115b0565b60200260200101518583815181106103b2576103b26115b0565b8382815181106109d2576109d26115b0565b602002602001018190525080806109e8906115dc565b915050610989565b505092915050565b600080600084604001516001600160a01b0316856060015185604051602401610a2191906116b4565b60408051601f198184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff166001600160e01b0319909416939093179092529051610a7491906116e7565b600060405180830381855af49150503d8060008114610aaf576040519150601f19603f3d011682016040523d82523d6000602084013e610ab4565b606091505b509150915081610ac9576000925050506102e6565b80806020019051810190610add9190611703565b95945050505050565b6105058383836001610d65565b60006102e68233610dfc565b6000848152600660209081526040808320868452909152902060020154600160c01b900460ff1615610b735760405162461bcd60e51b815260206004820152601560248201527f706f6c69637920616c7265616479206578697374730000000000000000000000604482015260640161036d565b6040805160a08101825285815260208082018681526001600160a01b039586168385019081526001600160e01b03199095166060840190815260016080850181815260009a8b5260068552868b20998b52989093529390972091518255955195810195909555905160029094018054915193511515600160c01b027fffffffffffffff00ffffffffffffffffffffffffffffffffffffffffffffffff60e09590951c600160a01b027fffffffffffffffff00000000000000000000000000000000000000000000000090931695909316949094171791909116179055565b6000848152600260209081526040808320868452808352818420868552600181810185528386208787528552928520805460ff19168417905587855292528154909290610c9f90849061171e565b909155505050505050565b610cb48282610dfc565b6102aa576040516306047a6d60e11b8152600481018390526001600160a01b038216602482015260440161036d565b6000610cf76004546001600160a01b031690565b6001600160a01b031663a71a77d2836040518263ffffffff1660e01b8152600401610d2491815260200190565b602060405180830381865afa158015610d41573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102e69190611731565b60005b825181101561055357600085815260036020908152604080832087845290915281208451849290869085908110610da157610da16115b0565b60200260200101516001811115610dba57610dba611755565b6001811115610dcb57610dcb611755565b81526020810191909152604001600020805460ff191691151591909117905580610df4816115dc565b915050610d68565b600082610e0860015490565b1415806102e35750610e1a8383610e22565b159392505050565b600080546001600160a01b0316604051632427473b60e01b8152600481018590526001600160a01b0384811660248301529190911690632427473b906044016020604051808303816000875af1158015610e80573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102e39190611703565b600060208284031215610eb657600080fd5b5035919050565b60008060408385031215610ed057600080fd5b50508035926020909101359150565b81518152602080830151908201526040808301516001600160a01b0316908201526060808301516001600160e01b0319169082015260808083015115159082015260a081016102e6565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610f6857610f68610f29565b604052919050565b600067ffffffffffffffff821115610f8a57610f8a610f29565b5060051b60200190565b600082601f830112610fa557600080fd5b81356020610fba610fb583610f70565b610f3f565b82815260059290921b84018101918181019086841115610fd957600080fd5b8286015b84811015610ff45780358352918301918301610fdd565b509695505050505050565b6000806040838503121561101257600080fd5b823567ffffffffffffffff8082111561102a57600080fd5b61103686838701610f94565b9350602085013591508082111561104c57600080fd5b5061105985828601610f94565b9150509250929050565b6020808252825182820181905260009190848201906040850190845b818110156110e2576110cf83855180518252602080820151908301526040808201516001600160a01b0316908301526060808201516001600160e01b031916908301526080908101511515910152565b9284019260a0929092019160010161107f565b50909695505050505050565b600080600080600060a0868803121561110657600080fd5b8535945060208601359350604086013567ffffffffffffffff8082111561112c57600080fd5b61113889838a01610f94565b9450606088013591508082111561114e57600080fd5b61115a89838a01610f94565b9350608088013591508082111561117057600080fd5b818801915088601f83011261118457600080fd5b611191610fb58335610f70565b82358082526020808301929160051b8501018b8111156111b057600080fd5b602085015b818110156112455784813511156111cb57600080fd5b803586018d603f8201126111de57600080fd5b6020810135868111156111f3576111f3610f29565b611206601f8201601f1916602001610f3f565b8181528f604083850101111561121b57600080fd5b816040840160208301376000602083830101528087525050506020840193506020810190506111b5565b5050809450505050509295509295909350565b600082601f83011261126957600080fd5b81356020611279610fb583610f70565b82815260059290921b8401810191818101908684111561129857600080fd5b8286015b84811015610ff4578035600281106112b45760008081fd5b835291830191830161129c565b6000806000606084860312156112d657600080fd5b8335925060208401359150604084013567ffffffffffffffff8111156112fb57600080fd5b61130786828701611258565b9150509250925092565b6000806000806080858703121561132757600080fd5b5050823594602084013594506040840135936060013592509050565b6001600160a01b03811681146107a257600080fd5b6001600160e01b0319811681146107a257600080fd5b600080600080600060a0868803121561138657600080fd5b85359450602086013561139881611343565b935060408601356113a881611358565b94979396509394606081013594506080013592915050565b600080600080608085870312156113d657600080fd5b8435935060208501356113e881611343565b925060408501356113f881611358565b9396929550929360600135925050565b60008060008060008060c0878903121561142157600080fd5b8635955060208701359450604087013567ffffffffffffffff81111561144657600080fd5b61145289828a01611258565b945050606087013592506080870135915060a087013590509295509295509295565b600080600080600080600060e0888a03121561148f57600080fd5b873596506020880135955060408801359450606088013593506080880135925060a088013567ffffffffffffffff8111156114c957600080fd5b6114d58a828b01611258565b92505060c0880135905092959891949750929550565b600080600080600080600080610100898b03121561150857600080fd5b88359750602089013596506040890135955060608901359450608089013567ffffffffffffffff81111561153b57600080fd5b6115478b828c01611258565b94505060a089013561155881611343565b925060c089013561156881611358565b8092505060e089013590509295985092959890939650565b6000806040838503121561159357600080fd5b8235915060208301356115a581611343565b809150509250929050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b6000600182016115ee576115ee6115c6565b5060010190565b8051801515811461160557600080fd5b919050565b600060a0828403121561161c57600080fd5b60405160a0810181811067ffffffffffffffff8211171561163f5761163f610f29565b80604052508251815260208301516020820152604083015161166081611343565b6040820152606083015161167381611358565b6060820152611684608084016115f5565b60808201529392505050565b60005b838110156116ab578181015183820152602001611693565b50506000910152565b60208152600082518060208401526116d3816040850160208701611690565b601f01601f19169190910160400192915050565b600082516116f9818460208701611690565b9190910192915050565b60006020828403121561171557600080fd5b6102e3826115f5565b808201808211156102e6576102e66115c6565b60006020828403121561174357600080fd5b815161174e81611343565b9392505050565b634e487b7160e01b600052602160045260246000fdfea164736f6c6343000814000a"
}
